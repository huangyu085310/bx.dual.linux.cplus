#  BX-G5/G6 C++ SDK 动态区接口调用说明

## 文档适用者

通过仰邦SDK对仰邦控制卡向LED显示屏发送显示内容的软件开发者；

SDK中包含较多可调用的函数接口；

本文档主要讨论发布显示内容的相关SDK接口



## 动态区接口的使用

### 6代卡动态区的使用：

#### <span id="发送动态区内容">发送动态区内容</span>

步骤：

1.配置控制卡IP及端口

2.配置屏幕类型：单色、双色、三色

3.配置动态区参数：显示区的位置、大小、内容等

4.配置动态区内显示内容的属性：显示效果（移动速度等）、字体名称和大小等

5.调用发送动态区接口:[bxDual_dynamicArea_AddAreaTxtDetails_6G]()



代码实例：

```c++
/*1.配置控制卡IP及端口*/
	Ouint8* pIP = (Ouint8*)g_IP;//"192.168.0.181";
	Ouint32 nPort = 5005;

/*2.配置屏幕类型：单色、双色、三色*/
	E_ScreenColor_G56 color = eSCREEN_COLOR_DOUBLE;

/*3.配置动态区参数：显示区的位置、大小、内容等*/	
	{
		EQareaHeader_G6 aHeader1;
		aHeader1.AreaType = 0x00;
		aHeader1.AreaX = 0;// 16;
		aHeader1.AreaY = 0;
		aHeader1.AreaWidth = 64;
		aHeader1.AreaHeight = 32;
		aHeader1.BackGroundFlag = 0x00;
		aHeader1.Transparency = 101;
		aHeader1.AreaEqual = 0x00;
		
/*4.配置动态区内显示内容的特性：显示效果（移动速度等）、字体名称和大小等*/         
        EQpageHeader_G6 pheader1;
		pheader1.PageStyle = 0x00;
		pheader1.DisplayMode = 0x04;
		pheader1.ClearMode = 0x01;
		pheader1.Speed = 10;
		pheader1.StayTime = 500;
		pheader1.RepeatTime = 1;
		pheader1.ValidLen = 128;
		pheader1.CartoonFrameRate = 0x00;
		pheader1.BackNotValidFlag = 0x00;
		pheader1.arrMode = eMULTILINE;//eSINGLELINE;//
		pheader1.fontSize = 12;
		pheader1.color = 0xff00ff;
		pheader1.fontBold = false;
		pheader1.fontItalic = false;
		pheader1.tdirection = pNORMAL;
		pheader1.txtSpace = 0;
		pheader1.Valign = 2;
		pheader1.Halign = 3;

/*5.调用发送动态区接口；*/        
        Ouint8 nAreaID = 0;
        Ouint8 str[] = "汉字测试123456789";
		bxDual_dynamicArea_AddAreaTxtDetails_6G(pIP, 5005, eSCREEN_COLOR_DOUBLE, nAreaID, &aHeader1, &pheader1, (Ouint8*)"./allfonts/1.ttf", (Ouint8*)str);
	}
//"./allfonts/1.ttf"指定了字体文件，也可以直接使用字体名称:"宋体" 作为参数，但要求linux系统正确安装了宋体
```



#### 动态区涉及的数据结构说明

##### 动态区参数/动态区域属性

```C++
typedef struct
{
Ouint8	AreaType;		//区域类型；动态区时，固定为0x10;
Ouint16	AreaX;			//区域左上角横坐标
Ouint16	AreaY;			//区域左上角纵坐标
Ouint16	AreaWidth;		//区域宽度
Ouint16	AreaHeight;		//区域高度
Ouint8  BackGroundFlag; //是否有背景
Ouint8  Transparency;   //透明度
Ouint8  AreaEqual;      //前景、背景区域大小是否相同

/*下面的这个语音结构体EQSound_6G仅在动态区时使用；图文分区播放语音请使用单独的结构体：EQPicAreaSoundHeader_G6;*/
//使用语音功能时：部分卡需要配置串口为语音模式！！！
//不使用语音时，不需要考虑这个结构
EQSound_6G stSoundData;

}BXareaHeader_G6,EQareaHeader_G6;
```

##### 动态区内显示内容的属性：

```C++
typedef struct
{
Ouint8   PageStyle;			//数据页类型
Ouint8   DisplayMode;		//显示方式:0x00 –随机显示; 0x01–静止显示; 0x02–快速打出; 0x03–向左移动; 0x04 –向左连移； 0x05 –向上移动； 0x06 –向上连移；...0x25 –向右移动  0x26 –向右连移  0x27 –向下移动  0x28 –向下连移 其它参考6代卡动态区协议文档
Ouint8   ClearMode;			//退出方式/清屏方式
Ouint8   Speed;				//速度等级
Ouint16  StayTime;			//停留时间
Ouint8   RepeatTime;		//重复次数
Ouint16  ValidLen;			//此字段只在左移右移方式下有效
Ouint8   CartoonFrameRate;  //特技为动画方式时，该值代表其帧率
Ouint8   BackNotValidFlag;  //背景无效标志
//字体信息----------------------------------------------------------------------------
E_arrMode arrMode;			//排列方式--单行多行
Ouint16  fontSize;			//字体大小
Ouint32  color;				//字体颜色 E_Color_G56此通过此枚举值可以直接配置七彩色，如果大于枚举范围使用RGB888模式
Obool    fontBold;			//是否为粗体
Obool    fontItalic;		//是否为斜体
E_txtDirection tdirection;	//文字方向
Ouint16   txtSpace;			//文字间隔    
Ouint8 Halign; //横向对齐方式（0系统自适应、1左对齐、2居中、3右对齐）
Ouint8 Valign; //纵向对齐方式（0系统自适应、1上对齐、2居中、3下对齐）
//字体信息 结束
}BXpageHeader_G6,EQpageHeader_G6;
```



#### 动态区的删除

删除指定动态区：

```c++
	/*配置控制卡IP及端口*/
	Ouint8* pIP = (Ouint8*)g_IP;//"192.168.0.181";
	Ouint32 nPort = 5005;		

	/*指定要删除的动态区ID*/
	const Oint8 cnst_nAreaCount = 4;
	Oint8 pAreaID[cnst_nAreaCount];
	pAreaID[0] = 0;
	pAreaID[1] = 1;
	pAreaID[2] = 2;
	pAreaID[3] = 3;
	/*调用删除动态区的接口*/
	bxDual_dynamicArea_DelAreas_6G(pIP, 5005, cnst_nAreaCount, pAreaID);
```

删除所有动态区：

```c++
	/*配置控制卡IP及端口*/
	Ouint8* pIP = (Ouint8*)g_IP;//"192.168.0.181";
	Ouint32 nPort = 5005;		

	/*动态区ID==0xff时，表示要删除所有动态区*/
	Oint8 nAllID = 0xff;

	/*调用删除动态区的接口*/
	/*与指定删除动态区的接口相比，此接口函数名称中是DelArea，而不是DelAreas*/
	bxDual_dynamicArea_DelArea_6G(pIP, 5005, cnst_nAreaCount, nAllID);
```



